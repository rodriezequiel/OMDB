(this["webpackJsonp25-omdb"]=this["webpackJsonp25-omdb"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var c,a,s=n(0),r=n.n(s),i=n(29),o=n.n(i),l=n(8),u=n(22),b=n(7),j=n(14),d=n(59),m=n.n(d),h=n(10),O=n(6),f=n(23),p=n.n(f),x=Object(j.b)("getFilms",(function(e){return p.a.get("https://www.omdbapi.com/?apikey=20dac387&s=".concat(e)).then((function(e){return e.data})).then((function(e){return e}))})),g=Object(j.b)("setSingleFilm",(function(e){return p.a.get("https://www.omdbapi.com/?apikey=20dac387&i=".concat(e.params.id,"&plot=full")).then((function(e){return e.data})).then((function(e){return e}))})),v=Object(j.c)({query:{Response:"True",Search:[{Poster:"https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX600.jpg",Title:"The Shawshank Redemption",Type:"movie",Year:"1994",imdbID:"tt0111161"},{Poster:"https://m.media-amazon.com/images/M/MV5BNzNlZjUwMjItNDc3Ny00NWFhLWEwZDItMTNjMThhZGFiNjYyXkEyXkFqcGdeQXVyMTEyMjM2NDc2._V1_FMjpg_UX600_.jpg",Title:"Censor",Type:"movie",Year:"2021",imdbID:"tt10329614"},{Poster:"https://m.media-amazon.com/images/M/MV5BMTMzODU0NTkxMF5BMl5BanBnXkFtZTcwMjQ4MzMzMw@@._V1_SX600.jpg",Title:"Ratatouille",Type:"movie",Year:"2007",imdbID:"tt0382932"},{Poster:"https://m.media-amazon.com/images/M/MV5BZjdkOTU3MDktN2IxOS00OGEyLWFmMjktY2FiMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX600.jpg",Title:"Interstellar",Type:"movie",Year:"2014",imdbID:"tt0816692"}]},Movie:{},Pending:null},(c={},Object(h.a)(c,x.fulfilled,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{query:t.payload})})),Object(h.a)(c,g.pending,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{Pending:!0})})),Object(h.a)(c,g.fulfilled,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{Pending:!1,Movie:t.payload})})),c)),y=n(107),N=Object(j.b)("registerUser",(function(e){return p.a.post("/api/auth/register",e).then((function(e){return"string"!==typeof e.data?(y.b.success("Succesfully registered"),console.log(e.data),e.data):y.b.error("Error: ".concat(e.data),5)})).catch((function(e){return y.b.error(e,5)}))})),M=Object(j.b)("loginUser",(function(e){return p.a.post("/api/auth/login",e).then((function(e){return e.data})).then((function(e){return y.b.success("Welcome Back ".concat(e.name,"!")),e}))})),w=Object(j.b)("fetchUser",(function(){return p.a.get("/api/auth/me").then((function(e){return e.data})).then((function(e){return e})).catch((function(e){console.log(e)}))})),D=Object(j.b)("logoutUser",(function(){return p.a.post("/api/auth/logout").then((function(e){return console.log(e)}))})),S=Object(j.b)("addFav",(function(e,t){if(!t.getState().user.favs.some((function(t){return t.imdbID===e.movie.imdbID})))return p.a.put("/api/favourites",e).then((function(e){return e.data})).then((function(e){return e})).catch((function(e){return y.b.error("Parece que hubo un problema al agregar a favoritos",5)}))})),k=Object(j.b)("getFav",(function(e){return p.a.get("/api/favourites?userID=".concat(e)).then((function(e){return e.data})).then((function(e){return e})).catch((function(e){return y.b.error("No se pudieron recuperar tus favoritos",5)}))})),T=Object(j.b)("deleteFav",(function(e){return p.a.delete("/api/favourites?imdbID=".concat(e.imdbID,"&userId=").concat(e.userId)).then((function(e){return e.data})).then((function(e){return e})).catch((function(e){return y.b.error("No se pudo borrar de tus favoritos",5)}))})),F=Object(j.c)({success:!1,user:{},favs:[],pending:!1},(a={},Object(h.a)(a,N.fulfilled,(function(e,t){return"boolean"===typeof t.payload?Object(O.a)(Object(O.a)({},e),{},{success:!1,user:{}}):Object(O.a)(Object(O.a)({},e),{},{success:!0,user:t.payload})})),Object(h.a)(a,M.fulfilled,(function(e,t){return console.log("==================SUCCESFULLY LOGED IN=================="),Object(O.a)(Object(O.a)({},e),{},{success:!0,user:t.payload})})),Object(h.a)(a,M.rejected,(function(e,t){y.b.error("Datos incorrectos, intente nuevamente",5)})),Object(h.a)(a,w.fulfilled,(function(e,t){if(t.payload)return console.log("==================SUCCESFULLY LOGED IN=================="),Object(O.a)(Object(O.a)({},e),{},{success:!0,user:t.payload})})),Object(h.a)(a,D.fulfilled,(function(e,t){return console.log("==================SUCCESFULLY LOGED OUT=================="),Object(O.a)(Object(O.a)({},e),{},{success:!1,user:{},favs:[]})})),Object(h.a)(a,S.pending,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{pending:!0})})),Object(h.a)(a,S.fulfilled,(function(e,t){return"boolean"===typeof t.payload?Object(O.a)({},e):(console.log("==================FAV ADDED SUCCESFULLY=================="),y.b.success("Movie successfully added to favourites!",2),Object(O.a)(Object(O.a)({},e),{},{favs:t.payload,pending:!1}))})),Object(h.a)(a,k.fulfilled,(function(e,t){return"boolean"===typeof t.payload?console.log("pelotudo!"):(console.log("==================FAVs RECIEVED SUCCESFULLY=================="),Object(O.a)(Object(O.a)({},e),{},{favs:t.payload}))})),Object(h.a)(a,T.fulfilled,(function(e,t){return"boolean"===typeof t.payload?Object(O.a)({},e):(console.log("==================FAV REMOVED SUCCESFULLY=================="),y.b.success("Movie successfully removed from favourites!"),Object(O.a)(Object(O.a)({},e),{},{favs:t.payload,pending:!1}))})),Object(h.a)(a,T.pending,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{pending:!0})})),a)),I=Object(j.b)("getUsers",(function(){return p.a.get("/api/users").then((function(e){return e.data})).then((function(e){return e}))})),L=Object(j.c)([],Object(h.a)({},I.fulfilled,(function(e,t){return t.payload}))),E=Object(j.a)({middleware:function(e){return e().concat(m.a)},reducer:{movieList:v,user:F,users:L}}),C=n(1);function U(e){var t=e.movie;return Object(C.jsx)("div",{className:"col-lg-3 col-sm-6 pb-4",children:Object(C.jsx)("div",{className:"card mx-4 shadow-lg mt-3 bg-body rounded",style:{width:"auto",minWidth:"200px",maxWidth:"300px"},children:Object(C.jsxs)(u.b,{to:"/movie/".concat(t.imdbID),className:"list-group-item list-group-item-action",style:{borderColor:"grey",padding:"5px"},children:[Object(C.jsx)("img",{src:t.Poster&&t.Poster.replace("300","600"),className:"card-img-top",alt:"Movie poster",style:{maxHeight:"52vh",minHeight:"52vh"}}),Object(C.jsx)("div",{className:"card-body pb-0",children:Object(C.jsxs)("p",{style:{fontSize:"0.99rem",lineHeight:"1rem",margin:"0",padding:"0"},children:[Object(C.jsx)("strong",{children:t.Title.length>18?t.Title.substring(0,18)+"...":t.Title}),Object(C.jsx)("br",{}),Object(C.jsxs)("em",{style:{fontSize:"0.8rem"},children:[t.Year,", ",t.Type]})]})})]})})},t.imdbID)}function Y(){var e=Object(l.b)();return Object(C.jsx)("header",{className:"pb-2 pt-2 bg-light border-bottom",children:Object(C.jsx)("div",{className:"container d-flex flex-wrap justify-content-center",children:Object(C.jsx)("form",{className:"col-12 mb-3 form-content",onChange:function(t){var n=t.target;return e(x(n.value))},onSubmit:function(e){return e.preventDefault()},children:Object(C.jsx)("input",{type:"search",className:"form-control",placeholder:"Search...","aria-label":"Search"})})})})}function z(){var e=Object(l.c)((function(e){return e.movieList})).query;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Y,{}),Object(C.jsx)("div",{className:"row d-flex justify-content-start pt-3 mx-5",children:"True"===e.Response?e.Search.map((function(e){return Object(C.jsx)(U,{movie:e},e.imdbID)})):Object(C.jsx)("h2",{style:{margin:"15% 0",textAlign:"center"},children:"Nothing was found..."})})]})}function P(){var e=Object(l.c)((function(e){return e.user})),t=e.favs,n=e.user,c=Object(l.b)();return Object(s.useEffect)((function(){n.id&&c(k(n.id))}),[n]),Object(C.jsxs)(C.Fragment,{children:[t.length?Object(C.jsx)("h2",{className:"my-3 ms-5",children:"This are your favourite Movies:"}):"",Object(C.jsx)("div",{className:"row d-flex justify-content-start pt-3 mx-5",children:t.length?t.map((function(e){return Object(C.jsx)(U,{movie:e},e.id)})):n.id?Object(C.jsx)("h3",{className:"",children:"Nothing was found..."}):Object(C.jsx)("h3",{children:"You must be logged in to see your favourites here!"})})]})}function V(){var e=Object(l.c)((function(e){return e})).users,t=Object(l.b)();return Object(s.useEffect)((function(){e.length||t(I())}),[]),Object(C.jsxs)("div",{className:"mx-5",children:[Object(C.jsx)("h2",{className:"my-5 ms-1 ",children:"Click on an user to see his/her favourites:"}),Object(C.jsx)("div",{className:"list-group",children:e.length?e.map((function(e){return Object(C.jsx)(u.b,{className:"list-group-item list-group-item-warning",to:"/users/favourites/".concat(e.id),children:e.name})})):Object(C.jsx)("h2",{style:{margin:"15% 0",textAlign:"center"},children:"No user was found"})})]})}function X(e){var t=e.match,n=Object(l.c)((function(e){return e.user})).favs,c=Object(l.c)((function(e){return e.users})),a=Object(l.b)();return Object(s.useEffect)((function(){t&&a(k(t.params.id))}),[]),Object(C.jsxs)(C.Fragment,{children:[n.length?Object(C.jsxs)("h2",{className:"my-3 ms-5",children:["This are ",c.filter((function(e){return e.id===parseInt(t.params.id)}))[0].name,"'s favourite Movies:"]}):"",Object(C.jsx)("div",{className:"row d-flex justify-content-start pt-3 mx-5",children:n.length?n.map((function(e){return Object(C.jsx)(U,{movie:e},e.id)})):Object(C.jsx)("h3",{className:"",children:"Nothing was found..."})})]})}function R(){var e=Object(l.c)((function(e){return e.user.success})),t=Object(l.b)();return Object(C.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(C.jsxs)("div",{className:"container-fluid shadow-sm pb-2 mb-2 bg-white rounded",children:[Object(C.jsx)(u.b,{className:"navbar-brand ms-auto",to:"/",children:Object(C.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/a9/Omdb-logo.png",alt:"OMDB",height:"50"})}),Object(C.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(C.jsx)("span",{className:"navbar-toggler-icon"})}),Object(C.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent",children:Object(C.jsxs)("ul",{className:"navbar-nav mt-2 ms-5 align-items-center",children:[Object(C.jsx)("li",{className:"d-flex nav-item me-2",children:Object(C.jsx)(u.b,{className:"nav-link active ","aria-current":"page",to:"/movies",children:"Search"})}),Object(C.jsx)("li",{className:"d-flex nav-item me-2 ",children:Object(C.jsx)(u.b,{className:"nav-link active ","aria-current":"page",to:"/favourites",children:"Favourites"})}),Object(C.jsx)("li",{className:"d-flex nav-item me-5 ",children:Object(C.jsx)(u.b,{className:"nav-link active ","aria-current":"page",to:"/users",children:"Users"})})]})}),Object(C.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent",children:Object(C.jsx)("ul",{className:"navbar-nav mt-2 me-4 ms-0 align-items-center",children:e?Object(C.jsx)("li",{className:"nav-item mx-2 ms-5",children:Object(C.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),t(D())},className:"nav-link active btn btn-warning btn-sm text-dark p-2",children:"Log Out"})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("li",{className:"nav-item mx-2",children:Object(C.jsx)("button",{type:"button",className:"btn btn-dark p-0",children:Object(C.jsx)(u.b,{className:"nav-link active text-light","aria-current":"page",to:"/access",children:"Log In"})})}),Object(C.jsx)("li",{className:"nav-item mx-2",children:Object(C.jsx)("button",{type:"button",className:"btn btn-success p-0",children:Object(C.jsx)(u.b,{className:"nav-link active text-light","aria-current":"page",to:"/register",children:"Register"})})})]})})})]})})}var B=n(40);function W(e){var t=e.isLogIn,n=e.changeHandler,c=e.submitHandler;return Object(C.jsx)("div",{className:"form-body ",children:Object(C.jsx)("div",{className:"row",children:Object(C.jsx)("div",{className:"form-holder ",children:Object(C.jsx)("div",{className:"form-content",children:Object(C.jsxs)("div",{className:"form-items",children:[Object(C.jsx)("h3",{children:t?"Log In":"Register"}),Object(C.jsx)("p",{children:"Fill in the data below."}),Object(C.jsxs)("form",{onChange:function(e){return n(e)},onSubmit:function(e){return c(e)},children:[Object(C.jsx)("div",{className:"col-md-12",children:Object(C.jsx)("input",{className:"form-control",type:"text",name:"name",placeholder:"Username",required:!0})}),Object(C.jsx)("div",{className:"col-md-12",children:Object(C.jsx)("input",{className:"form-control",type:"password",name:"password",placeholder:"Password",required:!0})}),Object(C.jsx)("div",{className:"form-button mt-3",children:Object(C.jsx)("button",{id:"submit",type:"submit",className:"btn btn-primary",children:t?"Log In":"Register"})})]})]})})})})})}function G(){var e=Object(s.useState)({name:"",password:""}),t=Object(B.a)(e,2),n=t[0],c=t[1],a=Object(l.c)((function(e){return e.user})),r=a.success,i=a.user,o=Object(l.b)(),u=Object(b.g)();return setTimeout((function(){r&&(o(k(i.id)),u.push("/movies"))}),1e3),Object(C.jsx)(W,{isLogIn:!1,changeHandler:function(e){var t=e.target;return c(Object(O.a)(Object(O.a)({},n),{},Object(h.a)({},t.name,t.value)))},submitHandler:function(e){e.preventDefault(),o(N(n))}})}function Z(){var e=Object(s.useState)({name:"",password:""}),t=Object(B.a)(e,2),n=t[0],c=t[1],a=Object(l.c)((function(e){return e.user})),r=a.success,i=a.user,o=Object(l.b)(),u=Object(b.g)();return setTimeout((function(){r&&(o(k(i.id)),u.push("/movies"))}),1e3),Object(C.jsx)(W,{isLogIn:!0,changeHandler:function(e){var t=e.target;return c(Object(O.a)(Object(O.a)({},n),{},Object(h.a)({},t.name,t.value)))},submitHandler:function(e){e.preventDefault(),o(M(n))}})}function _(e){var t=e.match,n=Object(l.b)(),c=Object(l.c)((function(e){return e.movieList})),a=c.Pending,r=c.Movie,i=Object(l.c)((function(e){return e.user})),o=i.user,u=i.favs,b=i.pending,j=r.Poster,d=r.Title,m=r.imdbID,h=r.Type,O=r.Year;Object(s.useEffect)((function(){n(g(t)),o.id&&n(k(o.id))}),[n,t,o]);return a?Object(C.jsx)("div",{className:" d-flex spinner-border text-warning justify-content-center",style:{margin:"15% auto",textAlign:"center",width:"4em",height:"4em"},role:"status",children:Object(C.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):Object(C.jsxs)("div",{className:"row d-flex justify-content-evenly pt-5 mx-5",children:[Object(C.jsx)("div",{className:"col-3 pb-0 mb0",children:Object(C.jsx)("img",{src:r.Poster&&r.Poster.replace("300","800"),className:"rounded shadow-lg p-2 mb-5 bg-body rounded",alt:"Movie poster",style:{height:"65vh",width:"auto",maxWidth:"100%"}})}),Object(C.jsxs)("div",{className:"col-9 pb-0 mb0 me-0",children:[Object(C.jsxs)("div",{className:"row d-flex justify-content-between",children:[Object(C.jsxs)("div",{className:"col-9 pb-0 mb-0 mt-1",children:[Object(C.jsx)("h1",{className:"fs-2",style:{display:"inline"},children:Object(C.jsx)("strong",{children:r.Title})}),Object(C.jsxs)("span",{children:[" ",Object(C.jsxs)("em",{children:[r.Runtime,", ",r.Genre]})]}),Object(C.jsx)("br",{})]}),Object(C.jsx)("div",{className:" d-flex col-3 pb-0 my-auto justify-content-center",children:b?Object(C.jsx)("div",{class:"spinner-border text-warning",role:"status",children:Object(C.jsx)("span",{class:"visually-hidden",children:"Loading..."})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("input",{type:"checkbox",className:"btn-check",name:"favs",id:"btn-check-outlined",autoComplete:"on",onClick:function(e){o.id?e.target.checked?n(S({userID:o.id,movie:{Poster:j,Title:d,imdbID:m,Type:h,Year:O}})):n(T({imdbID:m,userId:o.id})):(e.preventDefault(),y.b.error("You must be loged in to add favourites!"))},defaultChecked:!!u.map((function(e){return e.imdbID})).includes(m)}),Object(C.jsx)("label",{className:"btn btn-outline-warning py-0",htmlFor:"btn-check-outlined","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-placement":"left",title:"Add to Favourites",children:Object(C.jsx)("span",{style:{fontSize:"1.5rem"},children:"\u2605"})})]})})]}),Object(C.jsxs)("p",{style:{fontSize:"0.9rem"},children:[r.Released," - ",Object(C.jsx)("span",{style:{color:"gold",fontSize:"1.5rem"},children:"\u2605"})," ",Object(C.jsx)("span",{style:{fontSize:"1.2rem"},children:r.imdbRating}),"/10 - ",r.imdbVotes," ","votes"]}),Object(C.jsx)("p",{children:r.Plot}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Director: "}),r.Director]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Stars: "}),r.Actors]}),Object(C.jsx)("p",{style:{fontSize:"0.9rem"},children:Object(C.jsxs)("em",{children:[Object(C.jsx)("strong",{children:"Country: "}),r.Country," - ",Object(C.jsx)("strong",{children:"Language: "}),r.Language]})}),Object(C.jsx)("p",{style:{fontSize:"0.9rem"},children:Object(C.jsxs)("em",{children:[Object(C.jsx)("strong",{children:"Box Office: "}),r.BoxOffice]})}),Object(C.jsx)("p",{style:{fontSize:"0.9rem"},children:Object(C.jsxs)("em",{children:["\xa9",r.Production]})})]})]})}n(104);o.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(u.a,{children:Object(C.jsx)(l.a,{store:E,children:Object(C.jsx)(b.b,{path:"/",component:function(){var e=Object(l.b)();return Object(s.useEffect)((function(){e(w())}),[]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(R,{}),Object(C.jsxs)(b.d,{children:[Object(C.jsx)(b.b,{exact:!0,path:"/movies",component:z}),Object(C.jsx)(b.b,{exact:!0,path:"/favourites",component:P}),Object(C.jsx)(b.b,{exact:!0,path:"/movie/:id",render:function(e){var t=e.match;return Object(C.jsx)(_,{match:t})}}),Object(C.jsx)(b.b,{exact:!0,path:"/register",component:G}),Object(C.jsx)(b.b,{exact:!0,path:"/access",component:Z}),Object(C.jsx)(b.b,{exact:!0,path:"/users",component:V}),Object(C.jsx)(b.b,{exact:!0,path:"/users/favourites/:id",render:function(e){var t=e.match;return Object(C.jsx)(X,{match:t})}}),Object(C.jsx)(b.a,{from:"/",to:"/movies"})]})]})}})})})}),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.17e8cd9f.chunk.js.map