(this["webpackJsonp25-omdb"]=this["webpackJsonp25-omdb"]||[]).push([[0],{95:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var c,a,r=n(0),s=n.n(r),i=n(28),o=n.n(i),l=n(8),d=n(22),u=n(7),b=n(14),j=n(58),m=n.n(j),h=n(10),O=n(5),f=n(23),p=n.n(f),x=Object(b.b)("getFilms",(function(e){for(var t=[],n=1;n<=5;n++)t.push(p.a.get("https://www.omdbapi.com/?apikey=20dac387&s=".concat(e,"&page=").concat(n)));return Promise.all(t).then((function(e){return e.map((function(e){return e.data}))})).then((function(e){return"True"===e[0].Response?(e[0].Search=e[0].Search.concat(e[1].Search,e[2].Search,e[3].Search,e[4].Search),e[0]):e[0]}))})),g=Object(b.b)("setSingleFilm",(function(e){return p.a.get("https://www.omdbapi.com/?apikey=20dac387&i=".concat(e.params.id,"&plot=full")).then((function(e){return e.data})).then((function(e){return e}))})),v=Object(b.c)({query:{Response:"True",Search:[{Poster:"https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX600.jpg",Title:"The Shawshank Redemption",Type:"movie",Year:"1994",imdbID:"tt0111161"},{Poster:"https://m.media-amazon.com/images/M/MV5BNzNlZjUwMjItNDc3Ny00NWFhLWEwZDItMTNjMThhZGFiNjYyXkEyXkFqcGdeQXVyMTEyMjM2NDc2._V1_FMjpg_UX600_.jpg",Title:"Censor",Type:"movie",Year:"2021",imdbID:"tt10329614"},{Poster:"https://m.media-amazon.com/images/M/MV5BMTMzODU0NTkxMF5BMl5BanBnXkFtZTcwMjQ4MzMzMw@@._V1_SX600.jpg",Title:"Ratatouille",Type:"movie",Year:"2007",imdbID:"tt0382932"},{Poster:"https://m.media-amazon.com/images/M/MV5BZjdkOTU3MDktN2IxOS00OGEyLWFmMjktY2FiMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX600.jpg",Title:"Interstellar",Type:"movie",Year:"2014",imdbID:"tt0816692"}]},Movie:{},Pending:null},(c={},Object(h.a)(c,x.fulfilled,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{query:t.payload})})),Object(h.a)(c,x.pending,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{Response:"False"})})),Object(h.a)(c,g.pending,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{Pending:!0})})),Object(h.a)(c,g.fulfilled,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{Pending:!1,Movie:t.payload})})),c)),y=n(98),N=Object(b.b)("registerUser",(function(e){return p.a.post("/api/auth/register",e).then((function(e){return"string"!==typeof e.data?(y.b.success("Succesfully registered"),console.log(e.data),e.data):y.b.error("Error: ".concat(e.data),5)})).catch((function(e){return y.b.error(e,5)}))})),w=Object(b.b)("loginUser",(function(e){return p.a.post("/api/auth/login",e).then((function(e){return e.data})).then((function(e){return y.b.success("Welcome Back ".concat(e.name,"!")),e}))})),S=Object(b.b)("fetchUser",(function(){return p.a.get("/api/auth/me").then((function(e){return e.data})).then((function(e){return y.b.success("Welcome Back ".concat(e.name,"!")),e})).catch((function(e){console.log(e)}))})),M=Object(b.b)("logoutUser",(function(){return p.a.post("/api/auth/logout").then((function(e){return console.log(e)}))})),D=Object(b.b)("addFav",(function(e,t){if(!t.getState().user.favs.some((function(t){return t.imdbID===e.movie.imdbID})))return p.a.put("/api/favourites",e).then((function(e){return e.data})).then((function(e){return e})).catch((function(e){return y.b.error("Parece que hubo un problema al agregar a favoritos",5)}))})),k=Object(b.b)("getFav",(function(e){return p.a.get("/api/favourites?userID=".concat(e)).then((function(e){return e.data})).then((function(e){return e})).catch((function(e){return y.b.error("No se pudieron recuperar tus favoritos",5)}))})),T=Object(b.b)("deleteFav",(function(e){return p.a.delete("/api/favourites?imdbID=".concat(e.imdbID,"&userId=").concat(e.userId)).then((function(e){return e.data})).then((function(e){return e})).catch((function(e){return y.b.error("No se pudo borrar de tus favoritos",5)}))})),F=Object(b.c)({success:!1,user:{},favs:[],pending:!1},(a={},Object(h.a)(a,N.fulfilled,(function(e,t){return"boolean"===typeof t.payload?Object(O.a)(Object(O.a)({},e),{},{success:!1,user:{}}):Object(O.a)(Object(O.a)({},e),{},{success:!0,user:t.payload})})),Object(h.a)(a,w.fulfilled,(function(e,t){return console.log("==================SUCCESFULLY LOGED IN=================="),Object(O.a)(Object(O.a)({},e),{},{success:!0,user:t.payload})})),Object(h.a)(a,w.rejected,(function(e,t){y.b.error("Datos incorrectos, intente nuevamente",5)})),Object(h.a)(a,S.fulfilled,(function(e,t){if(t.payload)return console.log("==================SUCCESFULLY LOGED IN=================="),Object(O.a)(Object(O.a)({},e),{},{success:!0,user:t.payload})})),Object(h.a)(a,M.fulfilled,(function(e,t){return console.log("==================SUCCESFULLY LOGED OUT=================="),Object(O.a)(Object(O.a)({},e),{},{success:!1,user:{},favs:[]})})),Object(h.a)(a,D.pending,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{pending:!0})})),Object(h.a)(a,D.fulfilled,(function(e,t){return"boolean"===typeof t.payload?Object(O.a)({},e):(console.log("==================FAV ADDED SUCCESFULLY=================="),y.b.success("Movie successfully added to favourites!",1),Object(O.a)(Object(O.a)({},e),{},{favs:t.payload,pending:!1}))})),Object(h.a)(a,k.fulfilled,(function(e,t){return"boolean"===typeof t.payload?console.log("pelotudo!"):(console.log("==================FAVs RECIEVED SUCCESFULLY=================="),Object(O.a)(Object(O.a)({},e),{},{favs:t.payload}))})),Object(h.a)(a,T.fulfilled,(function(e,t){return"boolean"===typeof t.payload?Object(O.a)({},e):(console.log("==================FAV REMOVED SUCCESFULLY=================="),y.b.success("Movie successfully removed from favourites!",1),Object(O.a)(Object(O.a)({},e),{},{favs:t.payload,pending:!1}))})),Object(h.a)(a,T.pending,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{pending:!0})})),a)),I=Object(b.b)("getUsers",(function(){return p.a.get("/api/users").then((function(e){return e.data})).then((function(e){return e}))})),C=Object(b.c)([],Object(h.a)({},I.fulfilled,(function(e,t){return t.payload}))),L=Object(b.a)({middleware:function(e){return e().concat(m.a)},reducer:{movieList:v,user:F,users:C}}),E=n(1);function U(e){var t=e.movie;return Object(E.jsx)("div",{className:"col-lg-3 col-sm-6 pb-4",children:Object(E.jsx)("div",{className:"card mx-4 shadow-lg mt-3 bg-body rounded hoverGrow",style:{width:"auto",minWidth:"200px",maxWidth:"300px"},children:Object(E.jsxs)(d.b,{to:"/movie/".concat(t.imdbID),className:"list-group-item list-group-item-action",style:{borderColor:"grey",padding:"5px"},children:[Object(E.jsx)("img",{src:t.Poster&&t.Poster.replace("300","600"),className:"card-img-top",alt:"Movie poster",style:{maxHeight:"52vh",minHeight:"52vh"}}),Object(E.jsx)("div",{className:"card-body pb-0",children:Object(E.jsxs)("p",{style:{fontSize:"0.99rem",lineHeight:"1rem",margin:"0",padding:"0"},children:[Object(E.jsx)("strong",{children:t.Title.length>18?t.Title.substring(0,18)+"...":t.Title}),Object(E.jsx)("br",{}),Object(E.jsxs)("em",{style:{fontSize:"0.8rem"},children:[t.Year,", ",t.Type]})]})})]})})},t.imdbID)}function z(){var e=Object(l.b)();return Object(E.jsx)("header",{className:"pb-2 pt-2 bg-light border-bottom",children:Object(E.jsx)("div",{className:"container d-flex flex-wrap justify-content-center",children:Object(E.jsx)("form",{className:"col-12 mb-3 form-content",onChange:function(t){var n=t.target;return e(x(n.value))},onSubmit:function(e){return e.preventDefault()},children:Object(E.jsx)("input",{type:"search",className:"form-control",placeholder:"Search...","aria-label":"Search"})})})})}function P(){var e=Object(l.c)((function(e){return e.movieList})).query;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(z,{}),Object(E.jsx)("div",{className:"row d-flex justify-content-start pt-3 mx-5",children:"True"===e.Response?e.Search.map((function(e){if(e)return Object(E.jsx)(U,{movie:e},e.imdbID)})):Object(E.jsx)("h2",{style:{margin:"15% 0",textAlign:"center"},children:"Nothing was found..."})})]})}function Y(){var e=Object(l.c)((function(e){return e.user})),t=e.favs,n=e.user,c=Object(l.b)();return Object(r.useEffect)((function(){n.id&&c(k(n.id))}),[n]),Object(E.jsxs)(E.Fragment,{children:[t.length?Object(E.jsx)("h2",{className:"my-3 ms-5",children:"This are your favourite Movies:"}):"",Object(E.jsx)("div",{className:"row d-flex justify-content-start pt-3 mx-5",children:t.length?t.map((function(e){return Object(E.jsx)(U,{movie:e},e.id)})):n.id?Object(E.jsx)("h3",{className:"",children:"Nothing was found..."}):Object(E.jsx)("h3",{children:"You must be logged in to see your favourites here!"})})]})}function V(){var e=Object(l.c)((function(e){return e})).users,t=Object(l.b)();return Object(r.useEffect)((function(){e.length||t(I())}),[]),Object(E.jsxs)("div",{className:"mx-5",children:[Object(E.jsx)("h2",{className:"my-5 ms-1 ",children:"Click on an user to see his/her favourites:"}),Object(E.jsx)("div",{className:"list-group",children:e.length?e.map((function(e){return Object(E.jsx)(d.b,{className:"list-group-item list-group-item-warning",to:"/users/favourites/".concat(e.id),children:e.name},e.id)})):Object(E.jsx)("h2",{style:{margin:"15% 0",textAlign:"center"},children:"No user was found"})})]})}function R(e){var t=e.match,n=Object(l.c)((function(e){return e.user})).favs,c=Object(l.c)((function(e){return e.users})),a=Object(l.b)();return Object(r.useEffect)((function(){t&&a(k(t.params.id))}),[]),Object(E.jsxs)(E.Fragment,{children:[n.length?Object(E.jsxs)("h2",{className:"my-3 ms-5",children:["This are ",c.filter((function(e){return e.id===parseInt(t.params.id)}))[0].name,"'s favourite Movies:"]}):"",Object(E.jsx)("div",{className:"row d-flex justify-content-start pt-3 mx-5",children:n.length?n.map((function(e){return Object(E.jsx)(U,{movie:e},e.id)})):Object(E.jsx)("h3",{className:"",children:"Nothing was found..."})})]})}function B(){var e=Object(l.c)((function(e){return e.user})),t=e.success,n=e.user,c=Object(l.b)();return Object(E.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(E.jsxs)("div",{className:"container-fluid shadow-sm pb-2 mb-2 bg-white rounded",children:[Object(E.jsx)(d.b,{className:"navbar-brand ms-auto",to:"/",children:Object(E.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/a9/Omdb-logo.png",alt:"OMDB",height:"50"})}),Object(E.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(E.jsx)("span",{className:"navbar-toggler-icon"})}),Object(E.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent",children:Object(E.jsxs)("ul",{className:"navbar-nav mt-2 ms-5 align-items-center",children:[Object(E.jsx)("li",{className:"d-flex nav-item me-2",children:Object(E.jsx)(d.b,{className:"nav-link active ","aria-current":"page",to:"/movies",children:"Search"})}),Object(E.jsx)("li",{className:"d-flex nav-item me-2 ",children:Object(E.jsx)(d.b,{className:"nav-link active ","aria-current":"page",to:"/favourites",children:"Favourites"})}),Object(E.jsx)("li",{className:"d-flex nav-item me-0",children:Object(E.jsx)(d.b,{className:"nav-link active ","aria-current":"page",to:"/users",children:"Users"})})]})}),Object(E.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent",children:Object(E.jsx)("ul",{className:"navbar-nav mt-2 me-4 ms-0 align-items-center",children:t?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("li",{className:"d-flex nav-item me-3",children:Object(E.jsx)("p",{className:"nav-item my-auto active ","aria-current":"page",to:"/users",children:n.name})}),Object(E.jsxs)("div",{className:"flex-shrink-0 dropdown",children:[Object(E.jsx)("a",{href:"#",className:"d-block link-dark text-decoration-none dropdown-toggle",id:"dropdownUser2","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",className:"bi bi-person-circle",viewBox:"0 0 16 16",children:[Object(E.jsx)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),Object(E.jsx)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})]})}),Object(E.jsx)("ul",{className:"dropdown-menu dropdown-menu-end text-small shadow","aria-labelledby":"dropdownUser2",children:Object(E.jsx)("li",{children:Object(E.jsx)("button",{className:"dropdown-item",onClick:function(e){e.preventDefault(),c(M())},children:"Sign out"})})})]})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("li",{className:"nav-item mx-2",children:Object(E.jsx)(d.b,{className:"nav-link active","aria-current":"page",to:"/access",children:Object(E.jsx)("button",{type:"button",className:"btn btn-outline-dark p-2",children:"Log In"})})}),Object(E.jsx)("li",{className:"nav-item mx-2",children:Object(E.jsx)("button",{type:"button",className:"btn btn-dark p-0",children:Object(E.jsx)(d.b,{className:"nav-link active text-light","aria-current":"page",to:"/register",children:"Register"})})})]})})})]})})}var G=n(41);function X(e){var t=e.isLogIn,n=e.changeHandler,c=e.submitHandler;return Object(E.jsx)("div",{className:"form-body ",children:Object(E.jsx)("div",{className:"row",children:Object(E.jsx)("div",{className:"form-holder ",children:Object(E.jsx)("div",{className:"form-content",children:Object(E.jsxs)("div",{className:"form-items",children:[Object(E.jsx)("h3",{children:t?"Log In":"Register"}),Object(E.jsx)("p",{children:"Fill in the data below."}),Object(E.jsxs)("form",{onChange:function(e){return n(e)},onSubmit:function(e){return c(e)},children:[Object(E.jsx)("div",{className:"col-md-12",children:Object(E.jsx)("input",{className:"form-control",type:"text",name:"name",placeholder:"Username",required:!0})}),Object(E.jsx)("div",{className:"col-md-12",children:Object(E.jsx)("input",{className:"form-control",type:"password",name:"password",placeholder:"Password",required:!0})}),Object(E.jsx)("div",{className:"form-button mt-3",children:Object(E.jsx)("button",{id:"submit",type:"submit",className:"btn btn-primary",children:t?"Log In":"Register"})})]})]})})})})})}function W(){var e=Object(r.useState)({name:"",password:""}),t=Object(G.a)(e,2),n=t[0],c=t[1],a=Object(l.c)((function(e){return e.user})),s=a.success,i=a.user,o=Object(l.b)(),d=Object(u.g)();return setTimeout((function(){s&&(o(k(i.id)),d.push("/movies"))}),1e3),Object(E.jsx)(X,{isLogIn:!1,changeHandler:function(e){var t=e.target;return c(Object(O.a)(Object(O.a)({},n),{},Object(h.a)({},t.name,t.value)))},submitHandler:function(e){e.preventDefault(),o(N(n))}})}function A(){var e=Object(r.useState)({name:"",password:""}),t=Object(G.a)(e,2),n=t[0],c=t[1],a=Object(l.c)((function(e){return e.user})),s=a.success,i=a.user,o=Object(l.b)(),d=Object(u.g)();return setTimeout((function(){s&&(o(k(i.id)),d.push("/movies"))}),1e3),Object(E.jsx)(X,{isLogIn:!0,changeHandler:function(e){var t=e.target;return c(Object(O.a)(Object(O.a)({},n),{},Object(h.a)({},t.name,t.value)))},submitHandler:function(e){e.preventDefault(),o(w(n))}})}function Z(e){var t=e.match,n=Object(l.b)(),c=Object(l.c)((function(e){return e.movieList})),a=c.Pending,s=c.Movie,i=Object(l.c)((function(e){return e.user})),o=i.user,d=i.favs,u=i.pending,b=s.Poster,j=s.Title,m=s.imdbID,h=s.Type,O=s.Year;Object(r.useEffect)((function(){n(g(t)),o.id&&n(k(o.id))}),[n,t,o]);return a?Object(E.jsx)("div",{className:" d-flex spinner-border text-warning justify-content-center",style:{margin:"15% auto",textAlign:"center",width:"4em",height:"4em"},role:"status",children:Object(E.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):Object(E.jsxs)("div",{className:"row d-flex justify-content-evenly pt-5 mx-5",children:[Object(E.jsx)("div",{className:"col-3 pb-0 mb0",children:Object(E.jsx)("img",{src:s.Poster&&s.Poster.replace("300","800"),className:"rounded shadow-lg p-2 mb-5 bg-body rounded hoverGrow",alt:"Movie poster",style:{height:"65vh",width:"auto",maxWidth:"100%"}})}),Object(E.jsxs)("div",{className:"col-9 pb-0 mb0 me-0",children:[Object(E.jsxs)("div",{className:"row d-flex justify-content-between",children:[Object(E.jsxs)("div",{className:"col-9 pb-0 mb-0 mt-1",children:[Object(E.jsx)("h1",{className:"fs-2",style:{display:"inline"},children:Object(E.jsx)("strong",{children:s.Title})}),Object(E.jsxs)("span",{children:[" ",Object(E.jsxs)("em",{children:[s.Runtime,", ",s.Genre]})]}),Object(E.jsx)("br",{})]}),Object(E.jsx)("div",{className:" d-flex col-3 pb-0 my-auto justify-content-center hoverGrow",children:u?Object(E.jsx)("div",{className:"spinner-border text-warning",role:"status",children:Object(E.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("input",{type:"checkbox",className:"btn-check",name:"favs",id:"btn-check-outlined",autoComplete:"on",onClick:function(e){o.id?e.target.checked?n(D({userID:o.id,movie:{Poster:b,Title:j,imdbID:m,Type:h,Year:O}})):n(T({imdbID:m,userId:o.id})):(e.preventDefault(),y.b.error("You must be loged in to add favourites!"))},defaultChecked:!!d.map((function(e){return e.imdbID})).includes(m)}),Object(E.jsx)("label",{className:"btn btn-outline-warning py-0 hoverGrow",htmlFor:"btn-check-outlined","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-placement":"left",title:"Add to Favourites",children:Object(E.jsx)("span",{style:{fontSize:"1.5rem"},children:"\u2605"})})]})})]}),Object(E.jsxs)("p",{style:{fontSize:"0.9rem"},children:[s.Released," - ",Object(E.jsx)("span",{style:{color:"gold",fontSize:"1.5rem"},children:"\u2605"})," ",Object(E.jsx)("span",{style:{fontSize:"1.2rem"},children:s.imdbRating}),"/10 - ",s.imdbVotes," ","votes"]}),Object(E.jsx)("p",{children:s.Plot}),Object(E.jsxs)("p",{children:[Object(E.jsx)("strong",{children:"Director: "}),s.Director]}),Object(E.jsxs)("p",{children:[Object(E.jsx)("strong",{children:"Stars: "}),s.Actors]}),Object(E.jsx)("p",{style:{fontSize:"0.9rem"},children:Object(E.jsxs)("em",{children:[Object(E.jsx)("strong",{children:"Country: "}),s.Country," - ",Object(E.jsx)("strong",{children:"Language: "}),s.Language]})}),Object(E.jsx)("p",{style:{fontSize:"0.9rem"},children:Object(E.jsxs)("em",{children:[Object(E.jsx)("strong",{children:"Box Office: "}),s.BoxOffice]})}),Object(E.jsx)("p",{style:{fontSize:"0.9rem"},children:Object(E.jsxs)("em",{children:["\xa9",s.Production]})})]})]})}n(95);o.a.render(Object(E.jsx)(s.a.StrictMode,{children:Object(E.jsx)(d.a,{children:Object(E.jsx)(l.a,{store:L,children:Object(E.jsx)(u.b,{path:"/",component:function(){var e=Object(l.b)();return Object(r.useEffect)((function(){e(S())}),[]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(B,{}),Object(E.jsxs)(u.d,{children:[Object(E.jsx)(u.b,{exact:!0,path:"/movies",component:P}),Object(E.jsx)(u.b,{exact:!0,path:"/favourites",component:Y}),Object(E.jsx)(u.b,{exact:!0,path:"/movie/:id",render:function(e){var t=e.match;return Object(E.jsx)(Z,{match:t})}}),Object(E.jsx)(u.b,{exact:!0,path:"/register",component:W}),Object(E.jsx)(u.b,{exact:!0,path:"/access",component:A}),Object(E.jsx)(u.b,{exact:!0,path:"/users",component:V}),Object(E.jsx)(u.b,{exact:!0,path:"/users/favourites/:id",render:function(e){var t=e.match;return Object(E.jsx)(R,{match:t})}}),Object(E.jsx)(u.a,{from:"/",to:"/movies"})]})]})}})})})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.a9ea1334.chunk.js.map